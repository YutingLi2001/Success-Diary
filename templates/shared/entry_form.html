<!-- Shared Entry Form Template -->
<!-- This template is used for both creating new entries and editing existing ones -->

<form id="entry-form" method="post" 
      action="{% if edit_mode %}{{ action_url }}{% else %}/add{% endif %}" 
      class="grid gap-4">
  
  {% if edit_mode %}
    <input type="hidden" name="_method" value="PUT">
  {% endif %}
  
  <!-- Title Section -->
  <div class="space-y-2">
    <h3 class="font-semibold text-gray-700">Entry Title <span class="text-sm font-normal text-gray-600">(optional)</span></h3>
    <div class="form-field">
      <input id="title" name="title" 
             value="{% if entry %}{{ entry.title or '' }}{% endif %}"
             placeholder="Custom title or keep auto-generated" 
             class="border border-gray-300 p-3 w-full rounded-lg focus:border-blue-500 focus:outline-none min-h-[44px]" />
    </div>
  </div>

  <!-- Success Section -->
  <div class="space-y-2">
    <h3 class="font-semibold text-green-700">Today's Successes <span class="text-sm font-normal text-green-600">(at least one)</span></h3>
    <div class="form-field">
      <input name="success_1" 
             value="{% if entry %}{{ entry.success_1 or '' }}{% endif %}"
             placeholder="âœ¨ What went well today? (required)" 
             class="border-2 border-green-300 p-3 w-full rounded-lg focus:border-green-500 focus:outline-none min-h-[44px]" 
             {% if not edit_mode %}required{% endif %} />
    </div>
    <div class="form-field">
      <input name="success_2" 
             value="{% if entry %}{{ entry.success_2 or '' }}{% endif %}"
             placeholder="Any other wins or progress? (optional)" 
             class="border border-green-200 p-3 w-full rounded-lg text-gray-600 focus:border-green-400 focus:outline-none min-h-[44px]" />
    </div>
    <div class="form-field">
      <input name="success_3" 
             value="{% if entry %}{{ entry.success_3 or '' }}{% endif %}"
             placeholder="One more success to celebrate? (optional)" 
             class="border border-green-200 p-3 w-full rounded-lg text-gray-600 focus:border-green-400 focus:outline-none min-h-[44px]" />
    </div>
  </div>

  <!-- Gratitude Section -->
  <div class="space-y-2">
    <h3 class="font-semibold text-blue-700">Today's Gratitude <span class="text-sm font-normal text-blue-600">(at least one)</span></h3>
    <div class="form-field">
      <input name="gratitude_1" 
             value="{% if entry %}{{ entry.gratitude_1 or '' }}{% endif %}"
             placeholder="ðŸ™ What are you grateful for today? (required)" 
             class="border-2 border-blue-300 p-3 w-full rounded-lg focus:border-blue-500 focus:outline-none min-h-[44px]" 
             {% if not edit_mode %}required{% endif %} />
    </div>
    <div class="form-field">
      <input name="gratitude_2" 
             value="{% if entry %}{{ entry.gratitude_2 or '' }}{% endif %}"
             placeholder="Something else that brought you joy? (optional)" 
             class="border border-blue-200 p-3 w-full rounded-lg text-gray-600 focus:border-blue-400 focus:outline-none min-h-[44px]" />
    </div>
    <div class="form-field">
      <input name="gratitude_3" 
             value="{% if entry %}{{ entry.gratitude_3 or '' }}{% endif %}"
             placeholder="One more thing to appreciate? (optional)" 
             class="border border-blue-200 p-3 w-full rounded-lg text-gray-600 focus:border-blue-400 focus:outline-none min-h-[44px]" />
    </div>
  </div>

  <!-- Anxiety Section -->
  <div class="space-y-2">
    <h3 class="font-semibold text-red-700">Today's Worries <span class="text-sm font-normal text-red-600">(at least one)</span></h3>
    <div class="form-field">
      <input name="anxiety_1" 
             value="{% if entry %}{{ entry.anxiety_1 or '' }}{% endif %}"
             placeholder="ðŸ’­ What's on your mind? Any concerns? (required)" 
             class="border-2 border-red-300 p-3 w-full rounded-lg focus:border-red-500 focus:outline-none min-h-[44px]" 
             {% if not edit_mode %}required{% endif %} />
    </div>
    <div class="form-field">
      <input name="anxiety_2" 
             value="{% if entry %}{{ entry.anxiety_2 or '' }}{% endif %}"
             placeholder="Any other stress or challenges? (optional)" 
             class="border border-red-200 p-3 w-full rounded-lg text-gray-600 focus:border-red-400 focus:outline-none min-h-[44px]" />
    </div>
    <div class="form-field">
      <input name="anxiety_3" 
             value="{% if entry %}{{ entry.anxiety_3 or '' }}{% endif %}"
             placeholder="Anything else worth noting? (optional)" 
             class="border border-red-200 p-3 w-full rounded-lg text-gray-600 focus:border-red-400 focus:outline-none min-h-[44px]" />
    </div>
  </div>

  <!-- Self Rating -->
  <div class="space-y-2">
    <label for="score" class="font-semibold text-purple-700">Overall Day Rating (1-5)</label>
    <select name="score" class="border p-3 w-full rounded-lg focus:outline-none focus:border-purple-500 min-h-[44px]" 
            {% if not edit_mode %}required{% endif %}>
      {% set current_score = entry.score if entry else 3 %}
      <option value="1" {% if current_score == 1 %}selected{% endif %}>1 - Challenging day</option>
      <option value="2" {% if current_score == 2 %}selected{% endif %}>2 - Difficult day</option>
      <option value="3" {% if current_score == 3 %}selected{% endif %}>3 - Average day</option>
      <option value="4" {% if current_score == 4 %}selected{% endif %}>4 - Good day</option>
      <option value="5" {% if current_score == 5 %}selected{% endif %}>5 - Great day</option>
    </select>
  </div>

  <!-- Journal Section -->
  <div class="space-y-2">
    <h3 class="font-semibold text-gray-700">Daily Journal <span class="text-sm font-normal text-gray-600">(optional)</span></h3>
    <div class="form-field">
      <textarea name="journal" 
                placeholder="Any additional thoughts, reflections, or details about your day..." 
                class="border border-gray-300 p-3 w-full rounded-lg focus:border-blue-500 focus:outline-none min-h-[100px] resize-y">{% if entry %}{{ entry.journal or '' }}{% endif %}</textarea>
    </div>
  </div>

  <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-4 rounded-lg font-semibold transition duration-200 w-full md:w-auto min-h-[44px]">
    {% if edit_mode %}Update Entry{% else %}Save Today's Entry{% endif %}
  </button>
</form>