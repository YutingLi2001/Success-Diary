/**
 * Progressive UI Styles for Success-Diary
 * Character counters and field state styling
 */

/* Character counter base styles */
.character-counter {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.875rem;
    margin-top: 0.5rem;
    justify-content: flex-end;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

/* Counter color states - following gray → amber → red progression */
.counter-info {
    color: #6b7280; /* Gray-500 */
}

.counter-warning {
    color: #f59e0b; /* Amber-500 */
    font-weight: 500;
}

.counter-error {
    color: #ef4444; /* Red-500 */
    font-weight: 600;
}

/* Field styling based on character limit proximity */
input.approaching-limit,
textarea.approaching-limit {
    border-color: #d1d5db; /* Gray-300 - subtle hint */
}

input.near-limit,
textarea.near-limit {
    border-color: #f59e0b; /* Amber-500 - warning */
    box-shadow: 0 0 0 1px #f59e0b33; /* Subtle amber glow */
}

input.at-limit,
textarea.at-limit {
    border-color: #ef4444; /* Red-500 - error */
    box-shadow: 0 0 0 1px #ef444433; /* Subtle red glow */
}

/* Focus states maintain limit awareness */
input.near-limit:focus,
textarea.near-limit:focus {
    border-color: #f59e0b;
    box-shadow: 0 0 0 2px #f59e0b33;
    outline: none;
}

input.at-limit:focus,
textarea.at-limit:focus {
    border-color: #ef4444;
    box-shadow: 0 0 0 2px #ef444433;
    outline: none;
}

/* Progressive field reveal animation */
.form-field {
    transition: all 0.3s ease;
}

/* Counter spacing and typography */
.character-counter .count {
    font-weight: 600;
}

.character-counter .separator {
    color: #9ca3af; /* Gray-400 */
    margin: 0 0.125rem;
}

.character-counter .limit {
    color: #6b7280; /* Gray-500 */
}

.character-counter .remaining {
    color: inherit;
    font-size: 0.8125rem;
    margin-left: 0.25rem;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .character-counter {
        font-size: 0.8125rem;
        gap: 0.125rem;
    }
    
    .character-counter .remaining {
        font-size: 0.75rem;
    }
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
    .form-field {
        transition: none;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .counter-info {
        color: #374151; /* Gray-700 */
    }
    
    .counter-warning {
        color: #d97706; /* Amber-600 */
    }
    
    .counter-error {
        color: #dc2626; /* Red-600 */
    }
}

/* Print styles - hide counters */
@media print {
    .character-counter {
        display: none !important;
    }
}

/* Unsaved changes indicator */
button[data-unsaved="true"]::after {
    content: " *";
    color: #f59e0b !important; /* Amber-500 to match orange button - !important to override Tailwind */
    font-weight: 600;
    margin-left: 0.125rem;
}

/* Ensure button text doesn't overflow */
button[type="submit"] {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}